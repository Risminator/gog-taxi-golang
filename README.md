# gog-taxi-golang
Golang web server for GOG Water Taxi

# Краткое описание

MVP Backend Веб-сервера для обработки запросов, необходимых для работы водного такси:
- создание заказа по заданному маршруту;
- предоставление пассажиру информации о свободных судах;
- обработка принятия заказов со стороны водителя судна;
- отслеживание процесса заказа: ожидание прибытия судна, ожидание пассажира у причала, передвижение по маршруту, завершение заказа.

Построение маршрута по воде в данном прототипе делегировалось серверу BRouter (https://github.com/abrensch/brouter).

# База данных

![UML_DB_Gog](https://github.com/user-attachments/assets/f2334cfb-739e-4649-90c1-5352c4d8fc08)

**Сущности, участвующие в заказе**:
- Клиент / Пассажир (customer) – пользователь, который создает заказы.
- Капитан / Судоводитель (driver) – пользователь, который принимает и исполняет заказы.
- Судно (vessel) – транспортное средство капитана. 
- Заказ (request) – объект, обеспечивающий взаимодействие между клиентом и капитаном.
- Причал (dock) – пункт отправления и пункт назначения в пути по воде в заказах.

**Водитель может иметь статусы**:
- Занят (busy) – капитан не вышел на линию и не ищет заказы, т. е. не получает о них уведомления (вебсокет-соединение закрыто).
- Принимает заказы (waiting) – капитан начал поиск заказов и является кандидатом для принятия новых заказов (вебсокет-соединение открыто).
- Неактивен (afw) - не был использован

**В процессе выполнения заказа он меняет статусы**:
- Поиск судоводителя (findingDriver): клиент уже создал новый заказ и в ожидании его принятия.
- Ожидание судоводителя (waitingForDriver): капитан принял уже заказ клиента, но еще не добрался до пункта отправления.
- Ожидание клиента (waitingForCustomer): капитан ожидает, пока клиент взойдет на борт.
- В процессе (inProgress): капитан уже добрался до пункта направления к клиенту, и ведется путь от пункта отправления к пункту назначения.
- Завершен (completed): капитан добрался до пункта назначения с клиентом – заказ был завершен успешно.
- Отмененный заказ (canceled): заказ был отменен одной из сторон.

# Процесс создания и выполнения заказа

Процесс заказа описан в диаграмме последовательности, приведённой ниже. В данной реализации реализованы процессы составления и создания заказа; отправления доступных заказов судоводителям; принятия, отслеживания и завершения заказа. Бронирование причалов в MVP не предусмотрено.

<img width="916" height="1366" alt="UML gog" src="https://github.com/user-attachments/assets/420a2dbb-8526-41fb-8fe3-eb2c5e469722" />


